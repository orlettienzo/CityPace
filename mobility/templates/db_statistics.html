{% extends "base.html" %}
{% block title %}Statistiques{% endblock %}
{% block content %}
    {% if done %}
    <section>
        <h2>Nombre d'entrées par table</h2>
        <table>
            <tr>
                <th>Nom de la table</th>
                <th>Nombre d'entrées</th>
            </tr>
            {% for table in entry_list %}
            <tr>
                <td>{{ table.table_name }}</td>
                <td>{{ table.number_of_entries }}</td>
            </tr>
            {% endfor %}
        </table>
    </section>
    <section>
        <h2>Nombre de rues par ville</h2>
        <table>
            <tr>
                <th>Ville</th>
                <th>Nombre de rues</th>
            </tr>
            {% for value in number_of_streets_by_city %}
            <tr>
                <td>{{ value.city_name }}</td>
                <td>{{ value.number_of_streets }}</td>
            </tr>
            {% endfor %}

        </table>
    </section>
    <section>
        <h2>Villes les plus cyclables</h2>
        <table>
            <tr>
                <th>Ville</th>
                <th>Nombre de cyclistes</th>
            </tr>
            {% for value in most_cyclable_cities %}
            <tr>
                <td>{{ value.city_name }}</td>
                <td>{{ value.number_of_cyclists }}</td>
            </tr>
            {% endfor %}
            <tr></tr>
        </table>
    </section>
    <section>
        <h2>Liste des villes</h2>
        <table>
            <tr>
                <th>Code Postal</th>
                <th>Nom</th>
                <th>Population</th>
            </tr>
            {% for city in city_list %}
            <tr>
                <td>{{ city.code_postal }}</td>
                <td>{{ city.nom }}</td>
                <td>{{ city.population }}</td>
            </tr>
            {% endfor %}
        </table>
    </section>
    <section>
        <h2>Liste des rues</h2>
        <table>
            <tr>
                <th class="hide-on-mobile">Identifiant de la rue</th>
                <th>Nom</th>
                <th class="hide-on-mobile">Code postal</th>
                <th>Ville</th>
            </tr>
            {% for street in street_list %}
            <tr>
                <td class="hide-on-mobile">{{ street.rue_id }}</td>
                <td>{{ street.nom }}</td>
                <td class="hide-on-mobile">{{ street.code_postal }}</td>
                <td>{{ street.city_name }}</td>

            </tr>
            {% endfor %}
        </table>
    </section>
    <section>
        <h2>Ratio de cyclistes les jours de pleine lune</h2>
        <p>
            Le ratio de cyclistes les jours de pleine lune est de {{ bike_ratio_on_full_moon_days }}%.
        </p>
    </section>
    {% else %}
    <section>
        <div class="db-error">
            La base de données est en train de s'initialiser. Veuillez revenir plus tard.
        </div>
    </section>
    {% endif %}

{% endblock %}